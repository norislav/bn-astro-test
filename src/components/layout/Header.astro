---
import { Icon } from "astro-icon/components";
import Data from "../../content/general/general.json";
import NavMenu from "./NavMenu.astro";
---

<header class="py-[10px] shadow-md">
  <!-- Top Bar -->
  <div class="md:flex hidden">
    <div class="max-w-[1400px] w-full mx-auto flex justify-end items-center space-x-4 text-sm text-gray-700">
      <a href="/bn-astro-test/contact" class="hover:text-primary-400 font-medium">Contact Us</a>
      <a href="/bn-astro-test/blog/" class="hover:text-primary-400 font-medium">Resources</a>
      <a href="tel:603-202-3423" class="hover:text-primary-400 font-medium">{Data.phoneNumber}</a>
      <a href="#" class="top-header__link header-btn">Verify Insurance</a>
    </div>
  </div>
  <!-- Main Navigation Bar -->
  <div class="bg-white px-5">
    <div class="max-w-[1400px] mx-auto flex justify-between items-center">
      <!-- Logo Section -->
      <div class="flex items-center space-x-2">
        <a href="/bn-astro-test/">
          <img src="/bn-astro-test/branding/brand-north-logo-dark.svg" alt="Company Logo" class="h-12" />
        </a>
      </div>
      <NavMenu />
    </div>
  </div>
</header>

<style>
  .top-header__link.header-btn {
    @apply bg-accent-500 px-3 text-black py-1 rounded-md hover:bg-accent-400 font-medium;
  }

  header {

   
    top: 0;
    transition: top 0.3s ease-in-out;
    width: 100%;
    z-index: 1000; /* Ensure it stays above other content */
    background-color: white;
    position: fixed;
  }

  .nav-up {
    top: -96px; /* Hide the header */
    position: fixed;
  }

  .nav-down {
    position: fixed;
    top: 0; /* Show the header */
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  let lastScrollTop = 0;
  const delta = 5;
  const header = document.querySelector('header');
  const navbarHeight = header.offsetHeight;

  window.addEventListener('scroll', function() {
    const st = window.pageYOffset || document.documentElement.scrollTop;

    if (Math.abs(lastScrollTop - st) <= delta) return;

    if (st > lastScrollTop && st > navbarHeight) {
      header.classList.add('nav-up');
      header.classList.remove('nav-down');
    } else {
      if (st + window.innerHeight < document.body.offsetHeight) {
        header.classList.add('nav-down');
        header.classList.remove('nav-up');
      }
    }

    lastScrollTop = st;
  });
});
</script>
